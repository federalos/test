<meta charset="utf-8">
<script>
	function getRand(min,max){
		return Math.floor(Math.random() * (max - min + 1) + min);
	}
	function getCard(){
		var cards = ['6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
		return cards[getRand(0, cards.length - 1)];
	}
	function getScore(arr)
	{
		var score = 0;
		for(i=0; i<arr.length; i++)
		{
			if (isNaN(arr[i]))
			{
				if(arr[i]=='J'||arr[i]=='Q'||arr[i]=='K')
				{
					score = score + 10;
				}
			}
			else 
			{
				score = score + parseInt(arr[i]);
			}
		}
		for (i=0; i<arr.length; i++)
		{
			if ((arr[i]=='A') && (score + 11 <= 21))
			{
				score = score + 11;
			}
			else if((arr[i]=='A') && (score + 11 > 21))
			{
				score = score + 1;
			}
		}
		return score;
	}
	function getStatus()
	{
		return 'Дилер: ' + dealer.join(' ') + '   ' + 'Игрок: ' + player.join(' ');
	}
	var dealer = [getCard()];
	var player = [getCard() , getCard()];
	alert(getStatus());
	var answer = '';
	if (getScore(player)==21)
	{
		alert('BLACKJACK! победа с перой раздачи');
	}
	else
	{
		do
		{
			answer = prompt(getStatus() + 'Добавить карты? +/-');
			if (answer == '+')
			{
				player.push(getCard());
			}
			else
			{
				while(getScore(dealer) < 17)
				{
					dealer.push(getCard());
				}
			}
		} 
		while ((answer == '+') && (getScore<21));
	}
	if (getScore(player) <= 21)
	{
		if (getScore(player) == 21)
		{
			alert('ПОБЕДА ' + getStatus());
		}
		if (getScore(player) == getScore(dealer))
		{
			alert('выйгрыш за mr.Nobody ' + getStatus());
		}
		if ((getScore(player) < getScore(dealer)) && (getScore(dealer) <=21))
		{
			alert('Casino wins. fatality ' + getStatus());
		}
		else 
		{
			alert('ПОБЕДА ' + getStatus());
		}
		if (getScore(player) > getScore(dealer))
		{
			alert('Твоя победа ' + getStatus());
		}
	}
	else 
	{
		alert('ПЕЕЕЕЕЕЕЕЕЕребор, т.е. проигрыш ЛОЛ гол' + getStatus());
	}
</script>